-- Add vulnerability_path column to dependency_vulns table
-- This column stores the dependency path as a JSON array through which the vulnerability is introduced
-- e.g., ["root", "artifact:my-app", "sbom:trivy@my-app", "pkg:npm/vulnerable@3.0"]
ALTER TABLE public.dependency_vulns ADD COLUMN IF NOT EXISTS vulnerability_path JSONB NOT NULL DEFAULT '[]';
